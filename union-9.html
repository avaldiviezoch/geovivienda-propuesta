<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GeoVivienda — UI PANTONE + Nunito Sans</title>
<meta name="color-scheme" content="light dark" />
<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet">

<style>
/* =========================================================
   THEME — Paleta institucional (PANTONE)
   Rojo 485 C  : #E30613   Gris 179-15 : #474747
   Azul 109-16 : #1E6EB6   Cian 118-13 : #5EBAD6
   ========================================================= */
:root{
  --red:#E30613; --gray:#474747; --blue:#1E6EB6; --cyan:#5EBAD6;
  --bg:#F7FBFD; --ink:#222; --muted:color-mix(in srgb, var(--gray) 70%, #fff 30%);
  --stroke:color-mix(in srgb, var(--blue) 12%, #e9eef3);
  --maxw:1200px; --radius:16px; --gap:24px; --hdr-h:84px;
  --shadow0:0 10px 24px rgba(30,110,182,.12);
  --shadow1:0 18px 44px rgba(30,110,182,.18);

  /* Altura única para tragamonedas (JS lee esta var) */
  --slot-h:60px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;scroll-behavior:smooth}
html{scroll-padding-top:var(--hdr-h)}
body{
  font-family:"Nunito Sans",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--ink);
  background:
    radial-gradient(1200px 600px at 85% -10%, color-mix(in srgb,var(--cyan) 40%, #fff 60%), transparent 55%),
    radial-gradient(800px 500px at -10% 10%, color-mix(in srgb,var(--blue) 32%, #fff 68%), transparent 60%),
    var(--bg);
}

/* ===== HEADER ===== */
header.site{
  position:fixed; inset:0 0 auto 0; height:var(--hdr-h); z-index:1000;
  backdrop-filter:saturate(130%) blur(8px);
  background:color-mix(in srgb,#ffffff 78%, transparent);
  border-bottom:1px solid var(--stroke);
  box-shadow:0 6px 18px rgba(30,110,182,.10);
  transition:background .3s ease, box-shadow .3s ease, border-color .3s ease;
}
header.site.scrolled{
  background:color-mix(in srgb,#ffffff 92%, var(--cyan) 8%);
  box-shadow:var(--shadow1);
  border-color:color-mix(in srgb, var(--stroke) 60%, var(--blue) 12%);
}
.navwrap{
  max-width:var(--maxw); height:100%;
  margin-inline:auto; padding:0 clamp(14px,3vw,28px);
  display:grid; grid-template-columns:auto 1fr auto; gap:18px; align-items:center;
}
.logo{display:flex; align-items:center; gap:.75rem; text-decoration:none; color:inherit}
.logo img{height:40px;width:auto;border-radius:12px;border:1px solid var(--stroke); background:#fff}
.logo span{font-weight:900; letter-spacing:.2px}
nav{justify-self:center; position:relative}
nav ul{list-style:none; display:flex; gap:10px; margin:0; padding:0}
nav a{
  position:relative; display:inline-flex; align-items:center; justify-content:center;
  font-weight:800; letter-spacing:.2px; text-decoration:none; color:var(--gray);
  padding:.7rem .9rem; border-radius:12px; transition:color .2s ease, transform .2s ease;
}
nav a:hover{ transform:translateY(-1px); color:var(--blue) }
nav a[aria-current="page"]{ color:var(--blue) }
nav .indicator{
  position:absolute; bottom:6px; height:3px; border-radius:999px;
  background:linear-gradient(90deg,var(--blue),var(--cyan));
  transition:left .35s cubic-bezier(.2,.8,.2,1), width .35s cubic-bezier(.2,.8,.2,1), opacity .25s;
  opacity:.9; pointer-events:none;
}
.btn{
  display:inline-flex; align-items:center; gap:.55rem; font-weight:800;
  padding:.7rem 1.1rem; border-radius:12px; text-decoration:none; color:#fff;
  background:linear-gradient(135deg, var(--red), color-mix(in srgb, var(--red) 60%, #000 0%));
  box-shadow:0 14px 26px rgba(227,6,19,.22);
  transform:translateZ(0);
  transition:transform .18s ease, box-shadow .22s ease, filter .2s ease;
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 18px 36px rgba(227,6,19,.30) }
#scrollbar{
  position:fixed; left:0; top:0; height:3px; width:0%; z-index:1200;
  background:linear-gradient(90deg, var(--red), var(--blue)); box-shadow:0 0 12px rgba(30,110,182,.35);
}

/* ===== COVER ===== */
.cover{
  position:relative; min-height:clamp(560px,86dvh,860px);
  display:grid; place-items:stretch; border-bottom:1px solid var(--stroke);
}
.cover .container{
  max-width:var(--maxw); margin:auto; padding:clamp(28px,5vw,46px);
  display:grid; grid-template-columns:1.2fr .95fr; gap:clamp(20px,5vw,36px); align-items:center;
}
@media (max-width:980px){ .cover .container{ grid-template-columns:1fr } }
.title{
  font-size:clamp(30px,5.2vw,66px); font-weight:900; line-height:1.02; margin:0 0 .5rem;
  letter-spacing:.2px; color:transparent;
  background:linear-gradient(180deg, var(--ink) 0%, var(--blue) 90%);
  -webkit-background-clip:text; background-clip:text;
  filter:drop-shadow(0 10px 22px rgba(30,110,182,.15));
  animation:titlePop .9s cubic-bezier(.2,.9,.2,1) both;
}
@keyframes titlePop{from{transform:translateY(18px) scale(.98); opacity:.0} to{transform:none; opacity:1}}
.subtitle{ color:var(--muted); font-size:clamp(14px,1.2vw,18px); max-width:68ch; margin:.5rem 0 1rem }
.actions{display:flex; gap:.6rem; flex-wrap:wrap}
.art{ position:relative; isolation:isolate }
.art .blob{
  position:absolute; inset:auto -16% -16% -16%; z-index:-1; filter:blur(16px); opacity:.7;
  background:
    radial-gradient(32% 38% at 30% 36%, color-mix(in srgb,var(--cyan) 70%, #fff 30%), transparent 60%),
    radial-gradient(30% 40% at 75% 35%, color-mix(in srgb,var(--blue) 60%, #fff 40%), transparent 60%),
    radial-gradient(26% 32% at 60% 70%, color-mix(in srgb,var(--red) 38%, #fff 62%), transparent 60%);
  border-radius:40%;
  animation:morph 16s ease-in-out infinite;
}
@keyframes morph{
  0%,100%{transform:translateY(0) rotate(0)}
  33%{transform:translateY(-8px) rotate(6deg)}
  66%{transform:translateY(6px) rotate(-4deg)}
}
.art img{
  width:100%; max-width:540px; display:block; margin:auto; border-radius:22px;
  box-shadow:0 24px 60px rgba(30,110,182,.25);
  transform:perspective(1000px) rotateY(-6deg) rotateX(2deg) translateY(0);
  transition:transform 600ms cubic-bezier(.2,.7,.2,1);
}
.art img:hover{ transform:perspective(1000px) rotateY(-1deg) rotateX(0) translateY(-4px) }

.info-apartado{
  max-width:var(--maxw); margin:10px auto 0; padding:16px clamp(12px,3.6vw,24px) 36px;
  color:var(--gray); text-align:center; font-weight:600; letter-spacing:.2px;
  background:linear-gradient(180deg, color-mix(in srgb,#fff 82%, var(--cyan) 8%), transparent);
  border-top:1px dashed var(--stroke);
}

/* ===== CIFRAS (Tragamonedas) ===== */
.stats{
  margin-top:18px; padding:clamp(42px,7vw,84px) clamp(16px,5vw,42px);
  background:linear-gradient(180deg, color-mix(in srgb,var(--blue) 56%, var(--cyan) 44%), color-mix(in srgb,var(--cyan) 70%, #fff 30%));
  color:#fff; position:relative; overflow:hidden;
}
.stats .wrap{max-width:var(--maxw); margin:0 auto; position:relative; z-index:2}
.stats h2{margin:0 0 24px; font-size:clamp(22px,3vw,36px); font-weight:900; letter-spacing:.3px}
.kpis{display:grid; grid-template-columns:repeat(4, minmax(200px,1fr)); gap:clamp(18px,3vw,32px)}
@media (max-width:900px){ .kpis{grid-template-columns:repeat(2,minmax(200px,1fr))} }
@media (max-width:560px){ .kpis{grid-template-columns:1fr} }
.counter{
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.03));
  border:1px solid color-mix(in srgb, #fff 30%, #000 0%);
  border-radius:18px; padding:18px; box-shadow:0 14px 34px rgba(0,0,0,.16) inset, 0 10px 26px rgba(0,0,0,.12);
  display:flex; flex-direction:column; gap:10px; align-items:center; justify-content:center; min-height:140px;
}
.slot{ display:flex; gap:.12em; align-items:flex-end; height:var(--slot-h) }
.digit-col{
  position:relative; width:.78em; height:var(--slot-h); overflow:hidden; border-radius:10px;
  background:rgba(255,255,255,.08); box-shadow:inset 0 0 0 1px rgba(255,255,255,.16), 0 6px 14px rgba(0,0,0,.12);
}
.reel{ will-change:transform }
.reel b{
  display:block; padding:0 .06em;
  font-size:clamp(32px,4.8vw,54px); line-height:var(--slot-h); font-weight:900;
  text-align:center; color:#fff; text-shadow:0 2px 6px rgba(0,0,0,.28);
}
.sep{display:inline-flex; align-items:center; justify-content:center; width:.46em; font-size:clamp(32px,4.8vw,54px); font-weight:900}
.label{font-size:12px; letter-spacing:.3px; opacity:.95; text-transform:uppercase}
.footnote{margin-top:12px; opacity:.9; font-size:11px}

/* ===== CONTENIDO ===== */
.wrapper{ max-width:1100px; margin:0 auto; padding:36px 18px }
.section{ margin-bottom:38px }
.section-title{ text-align:center; font-size:28px; font-weight:900; color:var(--blue); margin:8px 0 20px; letter-spacing:.3px }
.divider{ height:1px; background:linear-gradient(90deg, transparent, var(--stroke), transparent); margin:26px 0 }

.cards-row{ display:grid; grid-template-columns:repeat(auto-fit, minmax(280px, 1fr)); gap:var(--gap) }
.cards-row.cols-3{ grid-template-columns:repeat(3, minmax(280px,1fr)) }
.cards-row.cols-3 .card:first-child{ grid-column:1 / -1 }

.card{
  position:relative; height:260px; display:flex; flex-direction:column; overflow:hidden;
  border-radius:18px; background:#fff; border:1px solid var(--stroke);
  box-shadow:var(--shadow0);
  transition:transform .45s cubic-bezier(.2,.8,.2,1), box-shadow .3s ease, border-color .3s ease;
  transform-style:preserve-3d;
}
.card::before{
  content:""; position:absolute; inset:-2px; border-radius:inherit; z-index:0; pointer-events:none;
  background:
    linear-gradient(120deg, color-mix(in srgb,var(--blue) 65%, transparent), transparent 30%),
    linear-gradient(300deg, color-mix(in srgb,var(--cyan) 75%, transparent), transparent 30%),
    linear-gradient(60deg, color-mix(in srgb,var(--red) 35%, transparent), transparent 50%);
  opacity:.0; transition:opacity .35s ease;
}
.card:hover{ transform:translateY(-4px) rotateX(.6deg) rotateY(.6deg); box-shadow:var(--shadow1); border-color:color-mix(in srgb,var(--blue) 18%, var(--stroke)) }
.card:hover::before{ opacity:1 }
.card-header{
  position:relative; z-index:1;
  height:76px; display:flex; align-items:center; justify-content:space-between; gap:8px;
  padding:0 16px; font-weight:900; color:#fff; letter-spacing:.2px;
  background:linear-gradient(100deg, var(--blue), color-mix(in srgb,var(--cyan) 85%, var(--blue) 15%));
}
.card-icon{ width:28px; height:28px; display:grid; place-items:center; filter:drop-shadow(0 2px 6px rgba(0,0,0,.25)) }
.card-body{
  flex:1; padding:14px 16px 16px; color:var(--gray); font-size:15px; line-height:1.5;
  display:-webkit-box; -webkit-line-clamp:6; -webkit-box-orient:vertical; overflow:hidden;
}

/* ===== COOPERANTES (Fondo blanco más GRANDE) ===== */
.partners{ margin-top:18px }
.partners-grid{ display:grid; grid-template-columns:repeat(4,minmax(160px,1fr)); gap:24px }
@media (max-width:980px){ .partners-grid{ grid-template-columns:repeat(3,minmax(160px,1fr)) } }
@media (max-width:640px){ .partners-grid{ grid-template-columns:repeat(2,minmax(140px,1fr)) } }

/* AUMENTAMOS la altura de la tarjeta para "agrandar la base blanca" sin tocar las imágenes */
.coop-card{
  position:relative; height:230px;
  border-radius:22px; overflow:hidden; padding:28px;
  border:1px solid var(--stroke); background:#fff; display:grid; place-items:center;
  box-shadow:0 16px 28px rgba(0,0,0,.08); transform:translateY(14px); opacity:0;
  transition:transform .6s cubic-bezier(.2,.8,.2,1), opacity .6s, box-shadow .3s;
}
.coop-card.show{ transform:translateY(0); opacity:1 }
.coop-card img{
  width:90%; height:90%; object-fit:contain; filter:grayscale(1) contrast(1.1) opacity(.95);
  transition:filter .35s ease, transform .35s ease;
}
.coop-card::after{ content:""; position:absolute; inset:0; opacity:.0; background:linear-gradient(180deg, color-mix(in srgb,var(--blue) 18%, transparent), transparent 60%); transition:opacity .3s }
.coop-card:hover{ box-shadow:0 20px 40px rgba(30,110,182,.18) }
.coop-card:hover img{ filter:grayscale(0) opacity(1); transform:scale(1.03) }
.coop-card:hover::after{ opacity:.45 }

/* ===== PLANCHA ===== */
.plancha{
  background:linear-gradient(180deg, #fff, color-mix(in srgb,#fff 70%, var(--cyan) 30%));
  border:1px solid var(--stroke); border-radius:20px; padding:14px;
  box-shadow:0 16px 36px rgba(30,110,182,.12); transform:translateY(18px); opacity:0;
  transition:transform .6s cubic-bezier(.2,.8,.2,1), opacity .6s;
}
.plancha.show{ transform:translateY(0); opacity:1 }
.plancha img{ width:100%; height:auto; display:block; border-radius:14px }

/* ===== FOOTER ===== */
footer{ border-top:1px solid var(--stroke); background:linear-gradient(180deg,#fff, color-mix(in srgb,#fff 70%, var(--cyan) 30%)); }
.footer-wrap{ max-width:var(--maxw); margin:0 auto; padding:28px 16px 36px; text-align:center; color:var(--muted) }
.social{display:flex; gap:12px; justify-content:center; margin:8px 0 12px}
.social a{
  width:38px;height:38px;border-radius:12px;border:1px solid var(--stroke);display:grid;place-items:center;
  background:#fff;color:var(--blue); text-decoration:none;
  transition:transform .15s ease, box-shadow .2s ease, background .2s ease; box-shadow:0 4px 12px rgba(30,110,182,.08)
}
.social a:hover{ transform:translateY(-2px); box-shadow:0 12px 24px rgba(30,110,182,.18); background:color-mix(in srgb,#fff 75%, var(--cyan) 25%) }
.copy{font-size:13px; line-height:1.6}
.copy a{ color:var(--blue); text-decoration:none }
.copy a:hover{text-decoration:underline}

@media (prefers-reduced-motion:reduce){
  *{animation:none!important;transition:none!important;scroll-behavior:auto!important}
}
</style>
</head>
<body>

<!-- Barra de progreso de scroll -->
<div id="scrollbar" aria-hidden="true"></div>

<!-- ===== HEADER ===== -->
<header class="site" role="banner">
  <div class="navwrap">
    <a class="logo" href="#inicio" aria-label="Ir al inicio">
      <img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/109rN8IqcM3AyWK6NRWNhouL-tqI03QXR=w1000" alt="Logo GeoVivienda">
      <span>GeoVivienda</span>
    </a>

    <nav aria-label="Principal">
      <ul id="navlist">
        <li><a class="active" href="#inicio">Inicio</a></li>
        <li><a href="#geovisor">Geovisor</a></li>
        <li><a href="#mvcs">MVCS</a></li>
        <li><a href="#vmvu">VMVU</a></li>
        <li><a href="#sg">Riesgos</a></li>
        <li><a href="#analisis">Análisis SIG</a></li>
      </ul>
      <div class="indicator" id="nav-indicator"></div>
    </nav>

    <a class="btn" href="#geovisor">Ingresar</a>
  </div>
</header>

<!-- ===== COVER ===== -->
<section id="inicio" class="cover">
  <div class="container">
    <div>
      <h1 class="title">Plataforma GIS del Ministerio de Vivienda, Construcción y Saneamiento</h1>
      <p class="subtitle">Accede a datos geográficos y estadísticos actualizados sobre vivienda, agua, saneamiento, titulación y planificación urbana. Una herramienta del MVCS al servicio de la ciudadanía y los gobiernos locales.</p>
      <div class="actions">
        <a class="btn" href="#geovisor">Geovisor</a>
        <a class="btn" style="background:linear-gradient(135deg,var(--blue),var(--cyan)); box-shadow:0 14px 26px rgba(30,110,182,.25)" href="#datos">Datos abiertos</a>
      </div>
    </div>

    <div class="art">
      <div class="blob" aria-hidden="true"></div>
      <img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1zkN8SbqXmM7twXgyJFUElp1xr5-w_Tg_=w1000" alt="Mapa Perú decorativo">
    </div>
  </div>

  <div class="info-apartado">
    El Geovivienda es el medio oficial para el acceso, uso e intercambio de información espacial que genera
    el <strong>Ministerio de Vivienda, Construcción y Saneamiento</strong>, aprobado mediante la R.M. Nº 087-2019-VIVIENDA.
  </div>

  <!-- Nuestras Cifras con valores ficticios -->
  <div class="stats">
    <div class="wrap">
      <h2>Nuestras Cifras</h2>
      <div class="kpis">
        <div class="counter" data-value="18245">
          <div class="slot" aria-label="Cobertura de Agua"></div>
          <div class="label">Cobertura de Agua</div>
        </div>
        <div class="counter" data-value="12904">
          <div class="slot" aria-label="Proyectos Culminados"></div>
          <div class="label">Proyectos Culminados</div>
        </div>
        <div class="counter" data-value="512783">
          <div class="slot" aria-label="Conexiones de agua nuevas"></div>
          <div class="label">Conexiones de agua nuevas</div>
        </div>
        <div class="counter" data-value="201449">
          <div class="slot" aria-label="Conexiones de Alcantarillado"></div>
          <div class="label">Conexiones de Alcantarillado</div>
        </div>
      </div>
      <div class="footnote">Datos demostrativos · efecto “tragamonedas”</div>
    </div>
  </div>
</section>

<!-- ===== CONTENIDO ===== -->
<div class="wrapper">

  <!-- GEOVISOR -->
  <div class="section geovisor-stage" id="geovisor">
    <h2 class="section-title">Geovisor</h2>
    <div class="cards-row cols-3">
      <div class="card" id="visor">
        <div class="card-header">
          <span>Visor Cartográfico</span>
          <div class="card-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="24" height="24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z" fill="#fff"/></svg>
          </div>
        </div>
        <div class="card-body">Síntesis de brechas e intervenciones en vivienda, titulación, acceso a servicios básicos y acceso a infraestructura y equipamiento urbano.</div>
      </div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- CONSTRUCCIÓN Y SANEAMIENTO -->
  <div class="section" id="mvcs">
    <h2 class="section-title">Construcción y Saneamiento</h2>
    <div class="cards-row">
      <div class="card"><div class="card-header"><span>Geovivienda Verde</span><div class="card-icon">🌿</div></div><div class="card-body">Plataforma integral diseñada para visualizar y gestionar información espacial relacionada con la gestión ambiental.</div></div>
      <div class="card"><div class="card-header"><span>Visor de mapas DATASS</span><div class="card-icon">🗺️</div></div><div class="card-body">Información georreferenciada sobre abastecimiento de agua y saneamiento en el ámbito rural y otra información institucional.</div></div>
      <div class="card"><div class="card-header"><span>Tablero de control DATASS</span><div class="card-icon">📊</div></div><div class="card-body">Cuadros y gráficos dinámicos sobre acceso a servicios de saneamiento, prestadores y sistemas de agua.</div></div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- VIVIENDA Y URBANISMO -->
  <div class="section" id="vmvu">
    <h2 class="section-title">Vivienda y Urbanismo</h2>
    <div class="cards-row">
      <div class="card"><div class="card-header"><span>Soluciones de vivienda</span><div class="card-icon">🏠</div></div><div class="card-body">Promueve el acceso a viviendas dignas y sostenibles para familias y comunidades.</div></div>
      <div class="card"><div class="card-header"><span>Títulos inscritos</span><div class="card-icon">📬</div></div><div class="card-body">Información de los asuntos inscritos en el registro de catastro, titulación y registro inmobiliario.</div></div>
      <div class="card"><div class="card-header"><span>Geoplan</span><div class="card-icon">🧭</div></div><div class="card-body">Instrumento que impulsa la planificación territorial con enfoques de desarrollo sostenible y prevención del riesgo de desastres.</div></div>
      <div class="card"><div class="card-header"><span>Visor SICCEP</span><div class="card-icon">🗂️</div></div><div class="card-body">Información georreferenciada de proyectos de inversión en vivienda.</div></div>
      <div class="card"><div class="card-header"><span>Bono familiar habitacional</span><div class="card-icon">🏡</div></div><div class="card-body">Subsidio que permite a las familias adquirir, construir o mejorar su vivienda.</div></div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- GESTIÓN DEL RIESGO DE DESASTRES -->
  <div class="section" id="sg">
    <h2 class="section-title">Gestión del Riesgo de Desastres</h2>
    <div class="cards-row">
      <div class="card"><div class="card-header"><span>Zonas expuestas a peligro</span><div class="card-icon">⚠️</div></div><div class="card-body">Áreas expuestas a peligros naturales o ambientales mediante análisis geográficos e históricos.</div></div>
      <div class="card"><div class="card-header"><span>Microzonificación sísmica</span><div class="card-icon">🌐</div></div><div class="card-body">Estudios geotécnicos y sismológicos que evalúan la respuesta del suelo ante eventos sísmicos.</div></div>
      <div class="card"><div class="card-header"><span>Visor Georiesgo</span><div class="card-icon">🧱</div></div><div class="card-body">Visualiza y evalúa riesgos geológicos, deslizamientos y movimientos sísmicos.</div></div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- ANÁLISIS SIG -->
  <div class="section" id="analisis">
    <h2 class="section-title">Análisis SIG</h2>
    <div class="cards-row">
      <div class="card"><div class="card-header"><span>Capas temáticas</span><div class="card-icon">🗺️</div></div><div class="card-body">Conjunto de capas integradas para análisis territorial: usos de suelo, cobertura vegetal, pendientes y restricciones.</div></div>
      <div class="card"><div class="card-header"><span>Indicadores territoriales</span><div class="card-icon">📈</div></div><div class="card-body">Cálculo de indicadores por provincia/distrito: densidad, accesibilidad, equipamientos y brechas de servicios.</div></div>
      <div class="card"><div class="card-header"><span>Descarga de datos</span><div class="card-icon">⬇️</div></div><div class="card-body">Exporta resultados en formatos GeoJSON, SHP y CSV para uso en otros sistemas.</div></div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- COOPERANTES -->
  <div class="section partners" id="cooperantes" aria-labelledby="titulo-cooperantes">
    <h2 class="section-title" id="titulo-cooperantes">Herramientas de instituciones adscritas y cooperantes</h2>
    <div class="partners-grid" role="list" aria-label="Logos de instituciones cooperantes">
      <div class="coop-card" role="listitem"><img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1fSDP-b8qaQ_6JVjs4PFrez0HEW0eLhTd=w1000" alt="GOTASS - Visor Cartográfico Institucional"></div>
      <div class="coop-card" role="listitem"><img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1cRMQs2IMc4EW0vQCfXAhfHgejW14IhoX=w1000" alt="GEO LLAQTA - Plataforma Única de Catastro Multipropósito"></div>
      <div class="coop-card" role="listitem"><img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1WNAspmCFqXlMZXHZacjCWl4kMBSYaDMT=w1000" alt="GeoSunass"></div>
      <div class="coop-card" role="listitem"><img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1VC2TX6hvIUL5FixemMytckiK0DDFMzRY=w1000" alt="CENEPRED"></div>
      <div class="coop-card" role="listitem"><img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1SltYpzkaggYfKVecNevf81RH5eXnPEG-=w1000" alt="Geo Perú"></div>
      <div class="coop-card" role="listitem"><img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1d9oBbYYTHV1WEBH7Mj6V30d-SfCb_MBE=w1000" alt="IDEP - Infraestructura de Datos Espaciales del Perú"></div>
      <div class="coop-card" role="listitem"><img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1IUCSUXtH0cjZeSsaJ5qx_icc6CW8iPVM=w1000" alt="Agencia Espacial del Perú - CONIDA"></div>
      <div class="coop-card" role="listitem"><img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1rJr76UvCOTt5zxRcSv0kpMA0RmENrqeJ=w1000" alt="Fuerza Aérea del Perú - CEVAN"></div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- PLANCHA COMPLETA -->
  <div class="section" id="alianzas">
    <h2 class="section-title">Reconocimiento</h2>
    <div class="plancha">
      <img loading="lazy" decoding="async" src="https://lh3.googleusercontent.com/d/1N0kJmgJc1pqYhZPqo6EPCjFz3L0-eYH4=w1000" alt="Plancha de aliados: GeoVivienda, MVCS, Bicentenario Perú y cooperantes">
    </div>
  </div>
</div>

<!-- ===== FOOTER ===== -->
<footer>
  <div class="footer-wrap">
    <div class="social" aria-label="Redes sociales del MVCS">
      <a href="https://www.facebook.com/viviendaperu" target="_blank" rel="noopener noreferrer" aria-label="Facebook MVCS">
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M22 12.07C22 6.48 17.52 2 11.93 2S1.86 6.48 1.86 12.07c0 4.99 3.64 9.13 8.4 9.93v-7.02H7.9v-2.9h2.36V9.41c0-2.33 1.39-3.62 3.52-3.62 1.02 0 2.1.18 2.1.18v2.31h-1.18c-1.16 0-1.52.72-1.52 1.46v1.76h2.59l-.41 2.9h-2.18V22c4.76-.8 8.4-4.94 8.4-9.93Z"/></svg>
      </a>
      <a href="https://x.com/viviendaperu" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter) MVCS">
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M17.1 3H20l-6.56 7.49L20.7 21h-5.2l-4.06-5.33L6.7 21H3.8l7.02-8L3.3 3h5.32l3.7 4.97L17.1 3Zm-1.82 16.2h1.44L8.86 5.7H7.34l7.94 13.5Z"/></svg>
      </a>
      <a href="https://www.youtube.com/@viviendagobpe" target="_blank" rel="noopener noreferrer" aria-label="YouTube MVCS">
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M23 12s0-3.53-.45-5.2a3.12 3.12 0 0 0-2.16-2.16C18.72 4.2 12 4.2 12 4.2s-6.72 0-8.39.44A3.12 3.12 0 0 0 1.45 6.8C1 8.47 1 12 1 12s0 3.53.45 5.2a3.12 3.12 0 0 0 2.16 2.16C5.28 19.8 12 19.8 12 19.8s6.72 0 8.39-.44a3.12 3.12 0 0 0 2.16-2.16C23 15.53 23 12 23 12ZM9.8 15.6V8.4L15.8 12l-6 3.6Z"/></svg>
      </a>
      <a href="https://www.instagram.com/viviendagobpe" target="_blank" rel="noopener noreferrer" aria-label="Instagram MVCS">
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path fill="currentColor" d="M12 7.3A4.7 4.7 0 1 0 16.7 12 4.71 4.71 0 0 0 12 7.3Zm0 7.7A3 3 0 1 1 15 12a3 3 0 0 1-3 3Zm4.85-8.73a1.1 1.1 0 1 0 1.1 1.1 1.1 1.1 0 0 0-1.1-1.1ZM12 2.2c-3.25 0-3.66 0-4.94.07a6.8 6.8 0 0 0-2.23.43 4.54 4.54 0 0 0-2.6 2.6 6.8 6.8 0 0 0-.43 2.23C1.73 9.81 1.73 10.22 1.73 13.47s0 3.66.07 4.94a6.8 6.8 0 0 0 .43 2.23 4.54 4.54 0 0 0 2.6 2.6 6.8 6.8 0 0 0 2.23.43c1.28.07 1.69.07 4.94.07s3.66 0 4.94-.07a6.8 6.8 0 0 0 2.23-.43 4.54 4.54 0 0 0 2.6-2.6 6.8 6.8 0 0 0 .43-2.23c.07-1.28.07-1.69.07-4.94s0-3.66-.07-4.94a6.8 6.8 0 0 0-.43-2.23 4.54 4.54 0 0 0-2.6-2.6 6.8 6.8 0 0 0-2.23-.43C15.66 2.2 15.25 2.2 12 2.2Z"/></svg>
      </a>
    </div>

    <div class="copy">
      Copyright © 2025 · Ministerio de Vivienda, Construcción y Saneamiento — MVCS<br>
      <a href="https://maps.app.goo.gl/3rAaz8cH5k3vVQyE9" target="_blank" rel="noopener noreferrer">Av. República de Panamá 3650 – San Isidro – Lima, Perú</a><br>
      Teléfono: (511) 211-7930 · <a href="mailto:sig@vivienda.gob.pe">sig@vivienda.gob.pe</a><br>
      Todos los derechos reservados.
    </div>
  </div>
</footer>

<script>
/* Scroll progress + header shadow */
(function(){
  const bar = document.getElementById('scrollbar');
  const header = document.querySelector('header.site');
  const onScroll = ()=>{
    const h = document.documentElement, s = h.scrollTop || document.body.scrollTop;
    const m = h.scrollHeight - h.clientHeight;
    bar.style.width = (s/m*100) + '%';
    if (s > 8) header.classList.add('scrolled'); else header.classList.remove('scrolled');
  };
  onScroll(); window.addEventListener('scroll', onScroll, {passive:true});
})();

/* Nav indicator follows active link */
(function(){
  const list = document.getElementById('navlist');
  const ind = document.getElementById('nav-indicator');
  const links = [...list.querySelectorAll('a')];
  function moveIndicator(a){
    const r = a.getBoundingClientRect(), pr = list.getBoundingClientRect();
    const left = r.left - pr.left + list.scrollLeft;
    ind.style.left = left + 'px';
    ind.style.width = r.width + 'px';
  }
  const setActive = (id)=>{
    links.forEach(a=>{
      const active = a.getAttribute('href') === ('#'+id);
      a.classList.toggle('active', active);
      if(active){ a.setAttribute('aria-current','page'); moveIndicator(a); }
      else a.removeAttribute('aria-current');
    });
  };
  window.addEventListener('load', ()=> moveIndicator(links.find(a=>a.classList.contains('active')) || links[0]));
  /* precise active via IntersectionObserver */
  const ids = ['inicio','geovisor','mvcs','vmvu','sg','analisis'];
  const io = 'IntersectionObserver' in window ? new IntersectionObserver((entries)=>{
    entries.forEach(e=>{ if(e.isIntersecting){ setActive(e.target.id); } });
  }, {threshold:.55, rootMargin:'-80px 0px -45% 0px'}) : null;
  ids.forEach(id=>{ const el = document.getElementById(id); if(io && el) io.observe(el); });
  links.forEach(a=> a.addEventListener('click', ()=> setActive(a.getAttribute('href').slice(1))));
})();

/* ========= COUNTERS — tragamonedas robusto =========
   - Usa una "reel" por columna (transform Y)
   - Respeta --slot-h (CSS) para alto exacto
   - Arranque no vacío (posición aleatoria)
   - Cascada y frenado suave
*/
(function(){
  const SEP='.';
  const counters = document.querySelectorAll('.stats .counter');
  const formatES = n => n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, SEP);

  function makeReel(finalDigit, loopCount){
    const reel = document.createElement('div');
    reel.className = 'reel';
    // 0..9 * loopCount + 0..final
    let html = '';
    for(let l=0;l<loopCount;l++){ for(let d=0; d<=9; d++) html += `<b>${d}</b>`; }
    for(let d=0; d<=finalDigit; d++) html += `<b>${d}</b>`;
    reel.innerHTML = html;
    return reel;
  }

  function buildSlot(slot, valueStr){
    slot.innerHTML='';
    for(const ch of valueStr){
      if(ch===SEP){
        const s=document.createElement('span'); s.className='sep'; s.textContent='.'; slot.appendChild(s);
      }else{
        const col = document.createElement('span'); col.className='digit-col';
        const reel = makeReel(Number(ch), 12); // vueltas largas para efecto “tragamonedas”
        col.appendChild(reel);
        slot.appendChild(col);
      }
    }
  }

  function animateSlot(slot, valueStr){
    const rowH = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--slot-h')) || 60;
    let idx=0;
    [...slot.children].forEach(node=>{
      if(!node.classList.contains('digit-col')) return;
      const d = Number(valueStr.replace(/\./g,'')[idx++]);
      const reel = node.querySelector('.reel');
      // estado inicial aleatorio (evita parpadeo vacío)
      const startOffset = -rowH * Math.floor(Math.random()*10);
      reel.style.transform = `translateY(${startOffset}px)`;
      // forzar reflow y animar hacia destino exacto
      requestAnimationFrame(()=>{
        const totalSteps = 12*10 + d; // (loops*10)+digit
        const finalY = -(rowH * totalSteps);
        const dur = 1200 + idx*180;   // cascada
        reel.style.transition = `transform ${dur}ms cubic-bezier(.18,.9,.18,1)`;
        reel.style.transform  = `translateY(${finalY}px)`;
      });
    });
  }

  function initCounter(counter){
    const raw = Number(counter.dataset.value);
    const val = Number.isFinite(raw) ? raw : Math.floor(2000 + Math.random()*900000);
    const str = formatES(val);
    const slot = counter.querySelector('.slot');
    buildSlot(slot, str);
    animateSlot(slot, str);
  }

  if('IntersectionObserver' in window){
    const io=new IntersectionObserver((entries,ob)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ initCounter(e.target); ob.unobserve(e.target);} });
    },{threshold:.25});
    counters.forEach(c=> io.observe(c));
  }else{
    counters.forEach(initCounter);
  }
})();

/* Reveal para cooperantes + plancha */
(function(){
  const cards = document.querySelectorAll('.coop-card');
  const plancha = document.querySelector('.plancha');
  if('IntersectionObserver' in window){
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('show'); io.unobserve(e.target);} });
    },{threshold:.2});
    cards.forEach(c=> io.observe(c));
    if(plancha) io.observe(plancha);
  }else{
    cards.forEach(c=> c.classList.add('show'));
    plancha?.classList.add('show');
  }
})();
</script>
</body>
</html>

