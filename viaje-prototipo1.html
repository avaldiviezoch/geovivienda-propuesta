<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Itinerario ¬∑ Lima ‚Äì Madrid ‚Äì Par√≠s ‚Äì Madrid ‚Äì Lima (6‚Äì17 nov 2025)</title>
  <meta name="color-scheme" content="light dark" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0b1220;                  /* fondo base (oscuro elegante) */
      --ink: #e9f2ff;                 /* texto principal */
      --muted: #b7c3d6;               /* texto secundario */
      --glass: color-mix(in srgb, #ffffff 10%, transparent);
      --card: color-mix(in srgb, #ffffff 6%, transparent);
      --stroke: color-mix(in srgb, #99b1ff 22%, transparent);
      --brand: #7aa2ff;               /* azul vibrante */
      --brand-2: #b973ff;             /* violeta */
      --ok: #4ade80;                  /* confirmado */
      --warn: #fbbf24;                /* pendiente */
      --info: #60a5fa;                /* info */
      --danger:#fb7185;               /* vuelos */
      --shadow: 0 10px 30px rgba(0,0,0,.35);

      --radius: 16px;
      --gap: 16px;
      --maxw: 1100px;
      --hdr-h: 72px;
      --chip-h: 30px;
    }

    *{ box-sizing: border-box }
    html,body{ height:100%; margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial; color:var(--ink); background: radial-gradient(1200px 1200px at 10% -10%, #1a2650 0, transparent 60%), radial-gradient(1200px 1200px at 110% 10%, #381a50 0, transparent 55%), var(--bg); }
    a{ color:var(--brand); text-decoration:none }
    a:hover{ text-decoration:underline }
    button{ font: inherit }

    /* Header */
    .hdr{
      position: sticky; top:0; z-index:50;
      height: var(--hdr-h);
      display:flex; align-items:center; justify-content:center;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(10,15,30,.66), rgba(10,15,30,.3));
      border-bottom: 1px solid var(--stroke);
    }
    .hdr__in{ width: min(100% - 24px, var(--maxw)); display:flex; align-items:center; gap:12px; }
    .logo{
      width:44px; height:44px; border-radius:14px;
      background: conic-gradient(from 210deg, var(--brand), var(--brand-2));
      box-shadow: inset 0 0 30px rgba(255,255,255,.25);
      display:grid; place-items:center; color:#0b1220; font-weight:900; letter-spacing:.5px;
    }
    .title{
      display:grid; gap:4px;
    }
    .title h1{ font-size:18px; margin:0; font-weight:900; letter-spacing:.2px }
    .title p{ margin:0; color:var(--muted); font-size:12px }

    .hdr__actions{ margin-left:auto; display:flex; gap:8px; align-items:center }
    .btn{
      height:36px; padding:0 14px; border:1px solid var(--stroke);
      background: linear-gradient(180deg, color-mix(in srgb, var(--card) 50%, transparent), transparent);
      color:var(--ink); border-radius:12px; cursor:pointer;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{ border-color: color-mix(in srgb, var(--brand) 40%, var(--stroke)); }
    .btn--brand{
      border: none; background: linear-gradient(90deg, var(--brand), var(--brand-2));
      color:#0b1220; font-weight:700;
    }
    .btn--brand:hover{ filter: brightness(1.05) }

    /* Hero */
    .hero{
      width: min(100% - 24px, var(--maxw));
      margin: 18px auto 0; display:grid; gap:16px;
      grid-template-columns: 1.2fr .8fr;
    }
    @media (max-width: 980px){ .hero{ grid-template-columns: 1fr } }

    .card{
      background: var(--card); border:1px solid var(--stroke); border-radius:var(--radius);
      box-shadow: var(--shadow);
    }
    .hero .summary{
      padding:18px; display:grid; gap:14px;
      background-image: radial-gradient(1000px 500px at -10% -30%, rgba(122,162,255,.25), transparent 60%),
                       radial-gradient(700px 500px at 120% -20%, rgba(185,115,255,.22), transparent 60%);
    }
    .kpis{ display:grid; grid-template-columns: repeat(4,1fr); gap:10px }
    @media (max-width: 680px){ .kpis{ grid-template-columns: repeat(2,1fr) } }
    .kpi{ padding:12px; border:1px dashed var(--stroke); border-radius:12px; display:grid; gap:6px; background: color-mix(in srgb, var(--glass) 50%, transparent) }
    .kpi b{ font-size:20px }
    .chips{ display:flex; gap:8px; flex-wrap:wrap }
    .chip{
      height: var(--chip-h); display:inline-flex; align-items:center; gap:8px; padding:0 12px;
      border-radius:999px; border:1px solid var(--stroke); background: color-mix(in srgb, var(--glass) 60%, transparent); color:var(--muted); font-size:12px;
    }
    .chip.ok{ border-color: color-mix(in srgb, var(--ok) 40%, var(--stroke)); color:#cbffda }
    .chip.warn{ border-color: color-mix(in srgb, var(--warn) 45%, var(--stroke)); color:#ffe6b0 }
    .chip.fly{ border-color: color-mix(in srgb, var(--danger) 45%, var(--stroke)); color:#ffd5db }

    .panel{
      padding:18px; display:grid; gap:14px;
    }
    .panel h3{ margin:0; font-size:15px; letter-spacing:.2px }
    .filters{ display:flex; flex-wrap:wrap; gap:8px }
    .tag{ padding:8px 12px; border-radius:12px; border:1px solid var(--stroke); cursor:pointer; background: color-mix(in srgb, var(--glass) 50%, transparent) }
    .tag.active{ border-color:var(--brand); color:#cfe2ff }

    /* Timeline */
    .days{
      width: min(100% - 24px, var(--maxw));
      margin: 14px auto 60px; display:grid; gap:12px;
    }
    .day{
      border:1px solid var(--stroke); border-radius:16px; overflow:hidden; background: color-mix(in srgb, #0d1730 65%, transparent);
      position:relative;
    }
    .day::before{
      content:""; position:absolute; inset:0;
      background: radial-gradient(600px 220px at 0% 0%, rgba(122,162,255,.12), transparent 60%);
      pointer-events:none
    }
    .day__hdr{
      display:flex; align-items:center; gap:10px; padding:12px 14px; background: color-mix(in srgb, var(--glass) 65%, transparent);
      border-bottom:1px solid var(--stroke);
    }
    .date{ font-weight:800; letter-spacing:.3px }
    .city{ color:var(--muted); font-size:13px; margin-left:auto }
    .state{ font-size:12px; padding:6px 10px; border-radius:10px; border:1px solid var(--stroke); }
    .state.ok{ color:#aaffc7; border-color: color-mix(in srgb, var(--ok) 45%, var(--stroke)) }
    .state.pend{ color:#ffe2a6; border-color: color-mix(in srgb, var(--warn) 45%, var(--stroke)) }
    .state.fly{ color:#ffcad2; border-color: color-mix(in srgb, var(--danger) 45%, var(--stroke)) }

    .events{ display:grid; gap:10px; padding:12px; }
    .ev{
      display:grid; gap:10px; padding:12px; border:1px solid var(--stroke); border-radius:12px; background: color-mix(in srgb, var(--glass) 50%, transparent);
      transition: transform .2s ease, border-color .2s ease;
    }
    .ev:hover{ transform: translateY(-2px); border-color: color-mix(in srgb, var(--brand) 45%, var(--stroke)) }
    .ev__row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
    .ev h4{ margin:0; font-size:15px }
    .pill{
      height: 26px; display:inline-flex; align-items:center; gap:6px; padding:0 10px; border-radius:999px; font-size:12px;
      border:1px solid var(--stroke); color:var(--muted); background: color-mix(in srgb, var(--glass) 50%, transparent)
    }
    .pill.ok{ color:#caffda; border-color: color-mix(in srgb, var(--ok) 50%, var(--stroke)) }
    .pill.pend{ color:#ffe2a6; border-color: color-mix(in srgb, var(--warn) 50%, var(--stroke)) }
    .pill.fly{ color:#ffd0d8; border-color: color-mix(in srgb, var(--danger) 50%, var(--stroke)) }
    .when{ color:#cfe0ff }
    .where{ color:#cbbdff }
    .act{ margin-left:auto; display:flex; gap:8px; flex-wrap:wrap }
    .btn-mini{
      height:30px; padding:0 10px; border-radius:10px; border:1px solid var(--stroke); background: color-mix(in srgb, var(--glass) 40%, transparent); color:var(--ink); cursor:pointer; font-size:12px;
    }
    .btn-mini.ok{ border-color: color-mix(in srgb, var(--ok) 45%, var(--stroke)) }
    .btn-mini.warn{ border-color: color-mix(in srgb, var(--warn) 45%, var(--stroke)) }
    .btn-mini.fly{ border-color: color-mix(in srgb, var(--danger) 45%, var(--stroke)) }

    .tools{
      width:min(100% - 24px, var(--maxw)); margin: 0 auto 40px;
      display:grid; grid-template-columns: 1.3fr .7fr; gap:16px;
    }
    @media (max-width: 980px){ .tools{ grid-template-columns: 1fr } }

    .notes{ min-height:180px }
    textarea{
      width:100%; min-height:160px; resize:vertical; padding:12px; border-radius:12px; border:1px solid var(--stroke);
      background: color-mix(in srgb, #0f1a35 70%, transparent); color:var(--ink);
    }
    .checklist{ display:grid; gap:10px }
    .check{ display:flex; gap:10px; align-items:center; padding:10px; border:1px solid var(--stroke); border-radius:12px; background: color-mix(in srgb, var(--glass) 50%, transparent) }
    .check input{ width:18px; height:18px }

    /* Reveal animation */
    .reveal{ opacity:0; transform: translateY(14px); transition: opacity .6s ease, transform .6s ease }
    .reveal.show{ opacity:1; transform:none }

    /* Print */
    @media print{
      .hdr, .panel, .filters, .hdr__actions{ display:none !important }
      body{ background:#fff; color:#111 }
      .card, .day{ box-shadow:none; border:1px solid #ddd }
      .day__hdr{ background:#f6f8ff; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="hdr">
    <div class="hdr__in">
      <div class="logo">GV</div>
      <div class="title">
        <h1>Itinerario ‚Äî Lima ¬∑ Madrid ¬∑ Par√≠s ¬∑ Madrid ¬∑ Lima</h1>
        <p>6‚Äì17 noviembre 2025 ¬∑ 2 personas ¬∑ Par√≠s sin hotel (familiar)</p>
      </div>

      <div class="hdr__actions">
        <button class="btn" id="btnPrint">üñ®Ô∏è Imprimir / PDF</button>
        <button class="btn btn--brand" id="btnReset">‚Ü∫ Reset notas/checklist</button>
      </div>
    </div>
  </header>

  <!-- Hero & Filters -->
  <section class="hero">
    <div class="summary card reveal">
      <div style="display:flex; align-items:center; gap:12px; justify-content:space-between">
        <div>
          <div style="opacity:.85; font-weight:800; letter-spacing:.3px">Resumen de viaje</div>
          <div style="color:var(--muted); font-size:13px">Fechas: <b>6‚Äì17 nov 2025</b> ¬∑ Base en <b>Saint-Germain-en-Laye</b></div>
        </div>
        <div class="chips">
          <div class="chip fly">‚úàÔ∏è Vuelos</div>
          <div class="chip ok">‚úÖ Confirmado</div>
          <div class="chip warn">‚è≥ Pendiente</div>
        </div>
      </div>

      <div class="kpis">
        <div class="kpi"><span style="color:var(--muted); font-size:12px">D√≠as totales</span><b>12</b></div>
        <div class="kpi"><span style="color:var(--muted); font-size:12px">Ciudades</span><b>Madrid ¬∑ Par√≠s</b></div>
        <div class="kpi"><span style="color:var(--muted); font-size:12px">Entradas</span><b>5 confirmadas</b></div>
        <div class="kpi"><span style="color:var(--muted); font-size:12px">Pendientes</span><b>2</b></div>
      </div>

      <div class="chips">
        <div class="chip">üè® Par√≠s: familiar (sin hotel)</div>
        <div class="chip">üïë Horarios locales de cada ciudad</div>
        <div class="chip">üó∫Ô∏è Links a mapas y compra</div>
      </div>
    </div>

    <aside class="panel card reveal">
      <h3>Filtros r√°pidos</h3>
      <div class="filters" id="filters">
        <button class="tag active" data-filter="all">Todos</button>
        <button class="tag" data-filter="Madrid">Madrid</button>
        <button class="tag" data-filter="Par√≠s">Par√≠s</button>
        <button class="tag" data-filter="Versalles">Versalles</button>
        <button class="tag" data-filter="Vuelo">Vuelos</button>
        <button class="tag" data-filter="Confirmado">Confirmado</button>
        <button class="tag" data-filter="Pendiente">Pendiente</button>
      </div>

      <h3>Accesos √∫tiles</h3>
      <div class="chips">
        <a class="chip" href="https://ticket.louvre.fr/en" target="_blank">üéüÔ∏è Louvre (oficial)</a>
        <a class="chip" href="https://billetterie.chateauversailles.fr/" target="_blank">üëë Versalles (oficial)</a>
        <a class="chip" href="https://www.toureiffel.paris/" target="_blank">üóº Torre Eiffel (oficial)</a>
        <a class="chip" href="https://www.bateaux-mouches.fr/es/reservas" target="_blank">üö§ Sena ¬∑ Bateaux Mouches</a>
        <a class="chip" href="https://www.bateauxparisiens.com/espanol.html" target="_blank">üö§ Sena ¬∑ Bateaux Parisiens</a>
      </div>
    </aside>
  </section>

  <!-- Days / Timeline -->
  <main class="days" id="days"></main>

  <!-- Tools: Notas y Checklist -->
  <section class="tools">
    <div class="card panel notes reveal">
      <h3>Notas personales (se guardan en este navegador)</h3>
      <textarea id="notes" placeholder="Escribe aqu√≠ ideas, recordatorios, presupuestos‚Ä¶"></textarea>
      <div style="display:flex; gap:8px; justify-content:flex-end">
        <button class="btn" id="saveNotes">üíæ Guardar</button>
      </div>
    </div>

    <div class="card panel reveal">
      <h3>Checklist de entradas / tareas</h3>
      <div class="checklist" id="checklist"></div>
    </div>
  </section>

  <footer style="width:min(100% - 24px, var(--maxw)); margin:0 auto 40px; color:var(--muted); text-align:center">
    Hecho con ‚ù§Ô∏è para Antonio ¬∑ Interactivo, responsive y listo para imprimir.
  </footer>

  <script>
    // ====== Datos del itinerario (EDITABLES) ======
    // Estados: Confirmado | Pendiente | Info | Vuelo
    // Ciudades: Madrid | Par√≠s | Versalles | Traslado
    // tz: "Europe/Madrid" | "Europe/Paris" (para Google Calendar 'ctz')

    const DAYS = [
      {
        date: "Jue ¬∑ 6 nov 2025",
        city: "Vuelo",
        state: "Confirmado",
        items: [
          {
            title: "Vuelo Lima ‚Üí Madrid",
            when: "23:05 (6 nov) ‚Äì 18:30 (7 nov) ¬∑ 11h 30m",
            where: "LIM ‚Üí MAD (Barajas)",
            type: "Vuelo",
            state: "Confirmado",
            startISO: "2025-11-06T23:05:00",
            endISO:   "2025-11-07T18:30:00",
            tz: "Europe/Madrid",
            gcalLocation: "LIM+Airport",
            details: "Noche en vuelo. Llegada el 7 nov 18:30.",
            links: []
          }
        ]
      },
      {
        date: "Vie ¬∑ 7 nov 2025",
        city: "Madrid",
        state: "Info",
        items: [
          {
            title: "Llegada a Madrid + Check-in",
            when: "18:30",
            where: "Zona Gran V√≠a / Chamber√≠",
            type: "Info",
            state: "Confirmado",
            startISO: "2025-11-07T18:30:00",
            endISO:   "2025-11-07T20:00:00",
            tz: "Europe/Madrid",
            details: "Cena ligera y descanso (jet lag).",
            links: [{label:"Mapa Gran V√≠a", url:"https://maps.google.com/?q=Gran+V%C3%ADa+Madrid"}]
          }
        ]
      },
      {
        date: "S√°b ¬∑ 8 nov 2025",
        city: "Madrid",
        state: "Confirmado",
        items: [
          {
            title: "Tour Santiago Bernab√©u",
            when: "11:30 (2‚Äì3h)",
            where: "Estadio Santiago Bernab√©u",
            type: "Tour",
            state: "Confirmado",
            startISO: "2025-11-08T11:30:00",
            endISO:   "2025-11-08T13:45:00",
            tz: "Europe/Madrid",
            details: "Entrada comprada.",
            links: [{label:"C√≥mo llegar", url:"https://maps.google.com/?q=Estadio+Santiago+Bernab%C3%A9u"}]
          },
          {
            title: "Centro hist√≥rico: Plaza Mayor ¬∑ Sol ¬∑ San Miguel",
            when: "Tarde",
            where: "Madrid Centro",
            type: "Paseo",
            state: "Info",
            startISO: "2025-11-08T16:00:00",
            endISO:   "2025-11-08T19:00:00",
            tz: "Europe/Madrid",
            details: "Atardecer en Templo de Debod opcional.",
            links: [{label:"Mapa Plaza Mayor", url:"https://maps.google.com/?q=Plaza+Mayor+Madrid"}]
          }
        ]
      },
      {
        date: "Dom ¬∑ 9 nov 2025",
        city: "Traslado",
        state: "Confirmado",
        items: [
          {
            title: "Vuelo Madrid ‚Üí Par√≠s (ORY)",
            when: "16:30 ‚Üí 18:25 (1h 55m)",
            where: "MAD ‚Üí ORY",
            type: "Vuelo",
            state: "Confirmado",
            startISO: "2025-11-09T16:30:00",
            endISO:   "2025-11-09T18:25:00",
            tz: "Europe/Paris",
            details: "Economy Lite. Traslado a Saint-Germain-en-Laye (~1h).",
            links: [{label:"C√≥mo llegar a Saint-Germain-en-Laye", url:"https://maps.google.com/?q=Saint-Germain-en-Laye"}]
          }
        ]
      },
      {
        date: "Lun ¬∑ 10 nov 2025",
        city: "Par√≠s",
        state: "Pendiente",
        items: [
          {
            title: "Arco del Triunfo + Campos El√≠seos",
            when: "Ma√±ana",
            where: "Charles de Gaulle ‚Äì √âtoile",
            type: "Paseo",
            state: "Info",
            startISO: "2025-11-10T10:00:00",
            endISO:   "2025-11-10T12:00:00",
            tz: "Europe/Paris",
            details: "Subida al mirador opcional.",
            links: [{label:"Entradas Arco", url:"https://www.paris-arc-de-triomphe.fr/"}]
          },
          {
            title: "Torre Eiffel (cima por ascensor)",
            when: "Ideal 15:30‚Äì16:00",
            where: "Champ de Mars",
            type: "Monumento",
            state: "Pendiente",
            startISO: "2025-11-10T15:30:00",
            endISO:   "2025-11-10T17:30:00",
            tz: "Europe/Paris",
            details: "Compra pendiente (web oficial). Ver atardecer + encendido.",
            links: [{label:"Comprar (oficial)", url:"https://www.toureiffel.paris/"}]
          }
        ]
      },
      {
        date: "Mar ¬∑ 11 nov 2025",
        city: "Versalles",
        state: "Confirmado",
        items: [
          {
            title: "Palacio de Versalles (Pasaporte)",
            when: "09:30 (d√≠a completo)",
            where: "Ch√¢teau de Versailles",
            type: "Museo",
            state: "Confirmado",
            startISO: "2025-11-11T09:30:00",
            endISO:   "2025-11-11T16:30:00",
            tz: "Europe/Paris",
            details: "Palacio ‚Üí Jardines ‚Üí Grand/ Petit Trianon ‚Üí Aldea de la Reina.",
            links: [{label:"Entradas (oficial)", url:"https://billetterie.chateauversailles.fr/"},{label:"Mapa", url:"https://maps.google.com/?q=Ch%C3%A2teau+de+Versailles"}]
          }
        ]
      },
      {
        date: "Mi√© ¬∑ 12 nov 2025",
        city: "Par√≠s",
        state: "Confirmado",
        items: [
          {
            title: "Museo del Louvre (entrada confirmada)",
            when: "11:30 ‚Üí 14:30",
            where: "Pir√°mide del Louvre",
            type: "Museo",
            state: "Confirmado",
            startISO: "2025-11-12T11:30:00",
            endISO:   "2025-11-12T14:30:00",
            tz: "Europe/Paris",
            details: "Ruta obras maestras: Mona Lisa ¬∑ Venus de Milo ¬∑ Samotracia.",
            links: [{label:"Tus entradas (oficial)", url:"https://ticket.louvre.fr/en"}]
          },
          {
            title: "√éle de la Cit√© (Notre-Dame) + Sainte-Chapelle",
            when: "Tarde",
            where: "Cit√©",
            type: "Paseo",
            state: "Info",
            startISO: "2025-11-12T15:30:00",
            endISO:   "2025-11-12T17:30:00",
            tz: "Europe/Paris",
            details: "Exterior de Notre-Dame, capilla g√≥tica opcional.",
            links: [{label:"Sainte-Chapelle", url:"https://www.sainte-chapelle.fr/"}]
          },
          {
            title: "Montmartre + Sacr√©-C≈ìur",
            when: "Atardecer / noche",
            where: "Montmartre",
            type: "Paseo",
            state: "Info",
            startISO: "2025-11-12T18:30:00",
            endISO:   "2025-11-12T20:30:00",
            tz: "Europe/Paris",
            details: "Mirador, Place du Tertre, fotos nocturnas.",
            links: [{label:"Mapa Montmartre", url:"https://maps.google.com/?q=Montmartre"}]
          }
        ]
      },
      {
        date: "Jue ¬∑ 13 nov 2025",
        city: "Par√≠s",
        state: "Confirmado",
        items: [
          {
            title: "Disneyland Par√≠s (entrada confirmada)",
            when: "8:30 (d√≠a completo)",
            where: "Marne-la-Vall√©e ‚Äî Chessy",
            type: "Parque",
            state: "Confirmado",
            startISO: "2025-11-13T08:30:00",
            endISO:   "2025-11-13T20:30:00",
            tz: "Europe/Paris",
            details: "Salida 6:45 (RER A ~1h15). Rope drop y shows nocturnos.",
            links: [{label:"C√≥mo llegar", url:"https://maps.google.com/?q=Marne-la-Vall%C3%A9e+Chessy"}]
          }
        ]
      },
      {
        date: "Vie ¬∑ 14 nov 2025",
        city: "Par√≠s",
        state: "Pendiente",
        items: [
          {
            title: "Le Marais + Place des Vosges",
            when: "Ma√±ana",
            where: "Le Marais",
            type: "Paseo",
            state: "Info",
            startISO: "2025-11-14T10:00:00",
            endISO:   "2025-11-14T12:00:00",
            tz: "Europe/Paris",
            details: "Boutiques, caf√©s y arquitectura.",
            links: [{label:"Mapa Le Marais", url:"https://maps.google.com/?q=Le+Marais+Paris"}]
          },
          {
            title: "Galeries Lafayette (mirador)",
            when: "Tarde",
            where: "Boulevard Haussmann",
            type: "Paseo",
            state: "Info",
            startISO: "2025-11-14T16:00:00",
            endISO:   "2025-11-14T17:00:00",
            tz: "Europe/Paris",
            details: "Sube a la terraza (vista gratis de Par√≠s).",
            links: [{label:"Ubicaci√≥n", url:"https://maps.google.com/?q=Galeries+Lafayette+Haussmann"}]
          },
          {
            title: "Crucero por el Sena con cena",
            when: "19:30‚Äì21:00 (recomendado)",
            where: "Bateaux Mouches / Bateaux Parisiens",
            type: "Crucero",
            state: "Pendiente",
            startISO: "2025-11-14T19:30:00",
            endISO:   "2025-11-14T21:00:00",
            tz: "Europe/Paris",
            details: "Reservar con antelaci√≥n (mesa ventana si es posible).",
            links: [
              {label:"Reservar ¬∑ Bateaux Mouches", url:"https://www.bateaux-mouches.fr/es/reservas"},
              {label:"Reservar ¬∑ Bateaux Parisiens", url:"https://www.bateauxparisiens.com/espanol.html"}
            ]
          }
        ]
      },
      {
        date: "S√°b ¬∑ 15 nov 2025",
        city: "Traslado",
        state: "Confirmado",
        items: [
          {
            title: "Vuelo Par√≠s (ORY) ‚Üí Madrid",
            when: "17:15 ‚Üí 19:15 (2h)",
            where: "ORY ‚Üí MAD",
            type: "Vuelo",
            state: "Confirmado",
            startISO: "2025-11-15T17:15:00",
            endISO:   "2025-11-15T19:15:00",
            tz: "Europe/Madrid",
            details: "Llegada ~19:30, hotel y cena ligera.",
            links: []
          }
        ]
      },
      {
        date: "Dom ¬∑ 16 nov 2025",
        city: "Madrid",
        state: "Info",
        items: [
          {
            title: "Madrid libre + Museo (opcional)",
            when: "D√≠a",
            where: "Prado o Reina Sof√≠a",
            type: "Cultura",
            state: "Info",
            startISO: "2025-11-16T11:00:00",
            endISO:   "2025-11-16T14:00:00",
            tz: "Europe/Madrid",
            details: "Compras finales y cena de despedida.",
            links: [{label:"Museo del Prado", url:"https://www.museodelprado.es/"},{label:"Reina Sof√≠a", url:"https://www.museoreinasofia.es/"}]
          }
        ]
      },
      {
        date: "Lun ¬∑ 17 nov 2025",
        city: "Vuelo",
        state: "Confirmado",
        items: [
          {
            title: "Vuelo Madrid ‚Üí Lima",
            when: "00:45 (noche del 16)",
            where: "MAD ‚Üí LIM",
            type: "Vuelo",
            state: "Confirmado",
            startISO: "2025-11-17T00:45:00",
            endISO:   "2025-11-17T12:45:00",
            tz: "America/Lima",
            details: "Check-in anticipado en Barajas.",
            links: []
          }
        ]
      }
    ];

    const CHECKS = [
      { id:"eiffel", label:"Comprar Torre Eiffel (10 nov ¬∑ 15:30‚Äì16:00)", url:"https://www.toureiffel.paris/" },
      { id:"sena",   label:"Reservar Crucero Sena con cena (14 nov ¬∑ 19:30)", url:"https://www.bateaux-mouches.fr/es/reservas" },
      { id:"metro",  label:"Cargar saldo Navigo/metro (Par√≠s)", url:"" },
      { id:"euros",  label:"Cambiar euros en Lima (efectivo diario)", url:"" },
      { id:"docs",   label:"Documentos de viaje en el m√≥vil (PDFs/QRs)", url:"" },
    ];

    // ====== Utilidades ======
    const pad = n => (n<10? "0"+n : ""+n);

    function toGoogleCalendarURL({title, startISO, endISO, tz, where, details}){
      // Construye link de Google Calendar con zona horaria (ctz)
      const start = new Date(startISO);
      const end   = new Date(endISO || start.getTime()+90*60000);
      const fmt   = (d)=> d.getUTCFullYear()+ pad(d.getUTCMonth()+1)+ pad(d.getUTCDate())+"T"+ pad(d.getUTCHours())+ pad(d.getUTCMinutes())+ pad(d.getUTCSeconds())+"Z";
      const dates = fmt(start)+"/"+fmt(end);
      const params = new URLSearchParams({
        action:"TEMPLATE",
        text: title,
        dates,
        details: details || "",
        location: where || "",
        ctz: tz || "Europe/Paris"
      });
      return "https://calendar.google.com/calendar/render?"+params.toString();
    }

    function el(tag, attrs={}, kids=[]){
      const n = document.createElement(tag);
      Object.entries(attrs).forEach(([k,v])=>{
        if(k==="class") n.className = v;
        else if(k==="html") n.innerHTML = v;
        else if(k==="text") n.textContent = v;
        else n.setAttribute(k, v);
      });
      (Array.isArray(kids)? kids:[kids]).forEach(k=> k && n.appendChild(k));
      return n;
    }

    // ====== Render ======
    const daysBox = document.getElementById('days');

    function renderDays(filter="all"){
      daysBox.innerHTML = "";
      DAYS.forEach((day, di)=>{
        const matchesDay = (filter==="all") || [day.city, day.state].includes(filter) || day.city.includes(filter);
        const dayCard = el("section", {class:"day reveal", "data-city":day.city, "data-state":day.state});

        const hdr = el("div", {class:"day__hdr"}, [
          el("div", {class:"date", text: day.date}),
          el("div", {class:"city", text: day.city}),
          el("div", {class:"state "+ (day.state==="Confirmado"?"ok": day.state==="Pendiente"?"pend": day.state==="Vuelo"?"fly":"") , text: day.state})
        ]);

        const evBox = el("div", {class:"events"});
        day.items.forEach((ev, ei)=>{
          const matches = matchesDay || [ev.type, ev.state].includes(filter) || (filter!=="all" && (ev.title+ev.where).toLowerCase().includes(filter.toLowerCase()));
          if(!matches) return;

          const statusPill = el("span", {class:"pill "+ (ev.state==="Confirmado"?"ok": ev.state==="Pendiente"?"pend": ev.type==="Vuelo"?"fly":""), text: (ev.state==="Confirmado"?"Confirmado": ev.state==="Pendiente"?"Pendiente": ev.type) });
          const row1 = el("div", {class:"ev__row"}, [
            el("h4", {text: ev.title}),
            statusPill,
            el("span", {class:"pill when", text: "üïí "+ev.when}),
            el("span", {class:"pill where", text: "üìç "+ev.where}),
          ]);

          const row2 = el("div", {class:"ev__row"}, [
            el("div", {class:"muted", style:"color:var(--muted)" , text: ev.details || "" }),
            el("div", {class:"act"}, [
              ev.startISO ? el("a", {href: toGoogleCalendarURL({title:ev.title,startISO:ev.startISO,endISO:ev.endISO,tz:ev.tz,where:ev.where,details:ev.details}), target:"_blank", class:"btn-mini "+(ev.type==="Vuelo"?"fly":"") , text:"‚ûï Google Calendar"}) : null,
              ...(ev.links||[]).map(l=> el("a", {href:l.url, target:"_blank", class:"btn-mini", text:l.label}))
            ])
          ]);

          evBox.appendChild(el("article", {class:"ev", "data-type":ev.type, "data-state":ev.state}, [row1, row2]));
        });

        dayCard.append(hdr, evBox);
        daysBox.appendChild(dayCard);
      });

      // anim reveal
      observeReveals();
    }

    // ====== Filtros ======
    const filters = document.getElementById('filters');
    filters.addEventListener('click', (e)=>{
      const b = e.target.closest('.tag'); if(!b) return;
      [...filters.querySelectorAll('.tag')].forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      renderDays(b.dataset.filter);
      scrollToDays();
    });

    function scrollToDays(){
      window.scrollTo({ top: document.querySelector('.days').offsetTop - 12 - 60, behavior:'smooth' });
    }

    // ====== Notas (localStorage) ======
    const notes = document.getElementById('notes');
    const saveNotes = document.getElementById('saveNotes');
    notes.value = localStorage.getItem('trip.notes') || "";
    saveNotes.addEventListener('click', ()=>{
      localStorage.setItem('trip.notes', notes.value);
      saveNotes.textContent = "‚úÖ Guardado";
      setTimeout(()=> saveNotes.textContent="üíæ Guardar", 1200);
    });

    // ====== Checklist (localStorage) ======
    const checklist = document.getElementById('checklist');
    function renderChecklist(){
      checklist.innerHTML = "";
      CHECKS.forEach(item=>{
        const wrap = el("label", {class:"check"});
        const inp = el("input", {type:"checkbox"});
        inp.checked = localStorage.getItem('check.'+item.id) === "1";
        inp.addEventListener('change', ()=> localStorage.setItem('check.'+item.id, inp.checked?"1":"0"));
        const txt = el("div", {}, [
          el("div", {text: item.label}),
          item.url ? el("a", {href:item.url, target:"_blank", text:"Abrir enlace"}) : null
        ]);
        wrap.append(inp, txt);
        checklist.appendChild(wrap);
      });
    }

    // ====== Acciones header ======
    document.getElementById('btnPrint').addEventListener('click', ()=> window.print());
    document.getElementById('btnReset').addEventListener('click', ()=>{
      if(!confirm("¬øResetear notas y checklist?")) return;
      localStorage.removeItem('trip.notes');
      CHECKS.forEach(i=> localStorage.removeItem('check.'+i.id));
      notes.value = "";
      renderChecklist();
    });

    // ====== Animaciones de aparici√≥n ======
    function observeReveals(){
      const obs = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('show'); obs.unobserve(e.target); } });
      }, {threshold:.12});
      document.querySelectorAll('.reveal').forEach(x=> obs.observe(x));
      document.querySelectorAll('.day').forEach(x=> obs.observe(x));
    }

    // Init
    renderDays("all");
    renderChecklist();
    observeReveals();
  </script>
</body>
</html>
